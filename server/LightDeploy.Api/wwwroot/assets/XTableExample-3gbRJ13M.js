import{aV as Y,aW as K,F as R,aX as D,aY as j,h as U,d as P,i as _,r as q,R as m,O as G,U as J,X as S,Q as w,W as k,Z as Q,S as V,a6 as Z}from"./index-mJUAFJoQ.js";import{a as I,d as H}from"./DataTable-h40o47lS.js";import"./Icon-TeiBA-kU.js";import"./use-merged-state-24cQO82p.js";import"./Dropdown-zTqd8F1V.js";import"./Follower-gq7Zi2AD.js";import"./Input--1lxrMj0.js";import"./FocusDetector-wmttWzEh.js";function X(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,t)}return r}function y(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?X(Object(r),!0).forEach(function(t){ee(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ee(e,n,r){return n=te(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function re(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,n||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function te(e){var n=re(e,"string");return typeof n=="symbol"?n:String(n)}const ne=e=>D(e)&&e.type===K&&typeof e.children=="string",f=e=>e?Array.isArray(e)?e.length>0&&e.every(n=>f(n)):e.type===Y?!0:e.type===K?e.children.trim()==="":e.type===R?Array.isArray(e.children)&&f(e.children):typeof e.type=="symbol"?f(e.children):typeof e.type=="string"||typeof e.type=="number"?!1:typeof e.type=="object"?!("render"in e.type&&e.type.render!=null||"template"in e.type&&e.type.template!=null||"setup"in e.type&&typeof e.type.setup=="function"):e.el==null&&e.children==null:!0,oe=Symbol("SKIPPED_FLATTEN_KEY"),E=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e)return[];const r=[];return(Array.isArray(e)?e:[e]).forEach(o=>{Array.isArray(o)?r.push(...E(o,n)):D(o)&&o.type===R?o.type===R?o.key===oe?r.push(o):r.push(...E(o.children,n)):n&&!f(o)?r.push(o):n||r.push(o):o!=null&&o!==""&&r.push(o)}),r},g=(e,n)=>{var r;if(!(!e||!n))return(r=e[n])!==null&&r!==void 0?r:e[j(n)]},le=function(e){if(typeof e=="function"){for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];let o=e(...r);return Array.isArray(o)&&o.length===1&&(o=o[0]),D(o)&&Array.isArray(o.children)&&o.children.length===1&&(o=o.children[0]),ne(o)?o.children:()=>U(e)}else if(typeof e=="string"||typeof e=="number")return String(e)},ae=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const t=Object.assign({},...n);return Object.keys(t).forEach(o=>{t[o]==null&&(delete t[o],delete t[j(o)])}),t},B=function(e){const n=[];for(var r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];t==null||t.forEach(a=>{Array.isArray(a)?a.forEach(i=>n.push(i)):n.push(a)});const l={};return Object.entries(e).forEach(a=>{let[i,p]=a;!n.includes(i)&&(l[i]=p)}),l},x=(e,n)=>{var r;return!e||!n?void 0:(r=e[n])!==null&&r!==void 0?r:e[j(n)]},v=(e,n)=>{const r=x(e,n);return typeof r=="string"&&r===""?!0:r},z=(e,n)=>{const r=x(e,n);return typeof r=="string"?r===""?void 0:+r:r},M=e=>{const n={};for(const[r,t]of Object.entries(e||{}))n[j(r)]=t;return n},ie=function(e){let n="[x.naive-ui]: "+e;for(var r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];for(let l=0;l<t.length;l++)n=n.replaceAll("{"+l+"}",t[l]!=null?t[l]:"");return n},N=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];console.warn(ie(e,...r))},se={type:{type:String},fixed:{type:[Boolean,String]},width:{type:[Number,String]},maxWidth:{type:[Number,String]},minWidth:{type:[Number,String]},resizable:{type:Boolean},align:{type:String},title:{type:String},titleAlign:{type:String},titleColSpan:{type:Number},titleRowSpan:{type:Number},colSpan:{type:[Number,Function]},rowSpan:{type:[Number,Function]},ellipsis:{type:[Boolean,Object]},tree:{type:Boolean},multiple:{type:Boolean},options:{type:Array},disabled:{type:Function},filter:{type:[String,Boolean,Function]},filterMode:{type:String},filterMultiple:{type:Boolean},filterOptions:{type:Array},filterOptionValue:{type:String},filterOptionValues:{type:Array},defaultFilterOptionValue:{type:String},defaultFilterOptionValues:{type:Array},sorter:{type:[String,Boolean,Function]},sortOrder:{type:String},defaultSortOrder:{type:String}};var b=P({name:"XNDataTableColumn",props:se,slots:Object,render(){return null}}),C=P({name:"XNDataTableSummaryRow",slots:Object,render(){return null}});const ue={rowSpan:{type:[String,Number]},colSpan:{type:[String,Number]},value:{type:String}};var O=P({name:"XNDataTableSummaryCell",props:ue,slots:Object,render(){return null}});const ce=()=>{const e=B(H,"columns");return y(y({},e),{},{columns:{type:Array,default:()=>[]}})},pe=ce();function L(e){const n=[];return e=E(e),e.forEach((r,t)=>{const o=r.key,l=r.props||{},a=r.children||{},i=B(l,"children","render","renderExpand");if(r.type===b){!l.type&&o==null&&N("Each {0} should have a unique `key` prop.",b.name);const p=y(y({},M(i)),{},{key:o??"__X_DATATABLE_COLUMN_".concat(t),ellipsis:v(l,"ellipsis"),expandable:v(l,"expandable"),filterMultiple:v(l,"filter-multiple"),multiple:v(l,"multiple"),resizable:v(l,"resizable"),sorter:v(l,"sorter"),tree:v(l,"tree"),colSpan:(()=>{const u=x(l,"col-span");return typeof u=="string"||typeof u=="number"?()=>+u:u})(),rowSpan:(()=>{const u=x(l,"row-span");return typeof u=="string"||typeof u=="number"?()=>+u:u})()});if(a.default){const u=L(a.default());u&&u.length>0&&(p.children=u)}W(p,a,!0),n.push(p)}else f(r)||N("Each child component in {0} should be {1}.",A.name,b.name)}),n}function fe(e,n){const r=[];return e=E(e),e.forEach(t=>{const o=t.children||{};if(t.type===C){const l={},{pageData:a}=n;if(o.default){const i=E(o.default({pageData:a}));de(i,{summaryRow:l,pageData:a})}r.push(l)}else f(t)||N("Each child component in `summary` slot of {0} should be {1}.",A.name,C.name)}),r}function de(e,n){const r=[];return e.forEach(t=>{const o=t.key,l=t.props||{},a=t.children||{},i=B(l,"rowSpan","colSpan","value");if(t.type===O){var p,u;o==null&&N("Each {0} should have a `key` prop related to a column.",O.name);const{summaryRow:s,pageData:c}=n;s[o]=y(y({},M(i)),{},{rowSpan:z(l,"row-span"),colSpan:z(l,"col-span"),value:(p=(u=a.default)===null||u===void 0?void 0:u.call(a,{pageData:c}))!==null&&p!==void 0?p:l.value})}else f(t)||N("Each child component in {0} should be {1}.",C.name,O.name)}),r}function W(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e.title=me(e,n,r),e.render=ye(e,n,r),e.renderExpand=ge(e,n,r),e.renderFilter=ve(e,n,r),e.renderFilterIcon=be(e,n,r),e.renderFilterMenu=he(e,n,r),e.renderSorter=Se(e,n,r),e.renderSorterIcon=we(e,n,r),e}function me(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const t=e.title;return r?le(n.title)||t:()=>{const o=g(n,"render-column"),l={column:e},a=o==null?void 0:o(l);return f(a)?typeof t=="function"?t(e):t:a}}function ye(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const t=e.render;return(o,l)=>{const a=g(n,"render-cell");if(a){const i={column:e,rowData:o,rowIndex:l,value:o==null?void 0:o[e.key]},p=a(i);if(r||!f(p))return p}return typeof t=="function"?t(o,l):o[e.key]}}function ge(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if("type"in e&&e.type!=="expand")return;const t=e.renderExpand;return(o,l)=>m("div",{class:"n-data-table__expand"},[(()=>{const a=g(n,"render-expand");if(a){const p=a({rowData:o,rowIndex:l});if(r||!f(p))return p}if(typeof t=="function")return t(o,l)})()])}function ve(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const t=e.renderFilter,o=g(n,"render-filter");return!o&&r?t:l=>{const a={column:e,active:l.active,show:l.show},i=o==null?void 0:o(a);return r||!f(i)?i:t==null?void 0:t(l)}}function be(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const t=e.renderFilterIcon,o=g(n,"render-filter-icon");return!o&&r?t:l=>{const a={column:e,active:l.active,show:l.show},i=o==null?void 0:o(a);return r||!f(i)?i:t==null?void 0:t(l)}}function he(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const t=e.renderFilterMenu,o=g(n,"render-filter-menu");return!o&&r?t:l=>{const a={column:e,hide:l.hide},i=o==null?void 0:o(a);return r||!f(i)?i:t==null?void 0:t(l)}}function Se(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const t=e.renderSorter,o=g(n,"render-sorter");return!o&&r?t:l=>{const a={column:e,order:l.order},i=o==null?void 0:o(a);return r||!f(i)?i:t==null?void 0:t(l)}}function we(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const t=e.renderSorterIcon,o=g(n,"render-sorter-icon");return!o&&r?t:l=>{const a={column:e,order:l.order},i=o==null?void 0:o(a);return r||!f(i)?i:t==null?void 0:t(l)}}const A=P({name:"XNDataTable",components:{NDataTable:I},props:pe,slots:Object,setup(e,n){let{attrs:r,slots:t,expose:o}=n;const l=_(()=>{var s;const c=(s=t.default)===null||s===void 0?void 0:s.call(t,{});if(f(c)){const d=F=>F==null?void 0:F.map(h=>{if(h=y({},h),"children"in h){const $=d(h.children);$&&(h.children=$)}return W(h,t)});return d(e.columns)}return L(c)}),a=_(()=>{var s;const c=(s=t.summary)===null||s===void 0?void 0:s.call(t,{});return f(c)?e.summary:d=>fe(c,{pageData:d})}),i=_(()=>{const s=g(t,"render-expand-icon");return s?c=>s(c):e.renderExpandIcon}),p=_(()=>ae(t,{default:void 0,"render-column":void 0,"render-cell":void 0,"render-expand":void 0,"render-expand-icon":void 0,"render-filter":void 0,"render-filter-icon":void 0,"render-filter-menu":void 0,"render-sorter":void 0,"render-sorter-icon":void 0})),u=q();return o({filter:s=>{var c;return(c=u.value)===null||c===void 0?void 0:c.filter(s)},filters:s=>{var c;return(c=u.value)===null||c===void 0?void 0:c.filters(s)},clearFilters:()=>{var s;return(s=u.value)===null||s===void 0?void 0:s.clearFilters()},sort:(s,c)=>{var d;return(d=u.value)===null||d===void 0?void 0:d.sort(s,c)},clearSorter:()=>{var s;return(s=u.value)===null||s===void 0?void 0:s.clearSorter()},page:s=>{var c;return(c=u.value)===null||c===void 0?void 0:c.page(s)},scrollTo:(s,c)=>{var d;return(d=u.value)===null||d===void 0?void 0:d.scrollTo(s,c)}}),()=>m(I,y(y(y({ref:u},r),e),{},{columns:l.value,summary:a.value,renderExpandIcon:i.value}),p.value)}}),Ce=Object.assign(A,{Column:b,SummaryRow:C,SummaryCell:O,install:e=>{e.component(A.name,A),e.component(b.name,b),e.component(C.name,C),e.component(O.name,O)}}),T=b,Oe=k("h2",null,"以下使用x.naive-ui插槽写法：",-1),Te={class:"flex gap-2"},Fe=P({__name:"XTableExample",setup(e){const n=[{id:1,name:"Athos",age:20},{id:2,name:"Porthos",age:19},{id:3,name:"Aramis",age:18}],r=t=>{window.$message.success(JSON.stringify(t))};return(t,o)=>{const l=Z;return G(),J(R,null,[Oe,m(w(Ce),{data:n,"row-key":a=>a.id,"single-line":!1},{default:S(()=>[m(w(T),{title:"selection",type:"selection"}),m(w(T),{key:"no",title:"编号",width:"5vw"},{"render-cell":S(({column:a,rowData:i,rowIndex:p})=>[k("div",null,Q(p+1),1)]),_:1}),m(w(T),{key:"name",title:"名字"}),m(w(T),{key:"age",title:"年龄"}),m(w(T),{key:"actions",title:"操作",width:"15vw"},{"render-cell":S(({column:a,rowData:i,rowIndex:p})=>[k("div",Te,[m(l,{type:"primary",size:"small",onClick:u=>r(i)},{default:S(()=>[V("查看")]),_:2},1032,["onClick"]),m(l,{type:"warning",size:"small",onClick:u=>r(i)},{default:S(()=>[V("编辑")]),_:2},1032,["onClick"]),m(l,{type:"error",size:"small",onClick:u=>r(i)},{default:S(()=>[V("删除")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["row-key"])],64)}}});export{Fe as default};
